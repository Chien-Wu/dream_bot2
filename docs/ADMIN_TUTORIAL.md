# 🔧 管理員指令教學

這是一個簡單易懂的管理員指令使用教學，幫助您快速上手 LINE Bot 的管理功能。

## 📋 目錄
- [基本概念](#基本概念)
- [用戶查詢指令](#用戶查詢指令)
- [低信心度問題查詢](#低信心度問題查詢)
- [AI問題分析](#AI問題分析)
- [幫助指令](#幫助指令)
- [常見問題](#常見問題)

---

## 基本概念

### 什麼是管理員指令？
管理員指令是以 `/` 開頭的特殊指令，只有管理員可以使用。一般用戶看不到這些指令。

### 如何使用？
直接在 LINE Bot 對話中輸入指令即可，就像平常聊天一樣。

**例如：** `/help`

### 📝 重要特性
- **單一完整訊息**：管理員指令的回應會以一則完整訊息傳送，不會被拆分或修改格式
- **保持原始格式**：所有換行、符號和格式都會完整保留
- **即時回應**：指令執行完畢立即回覆結果

---

## 用戶查詢指令

### 🔍 搜尋用戶：`/user`

**用法：**
```
/user <搜尋關鍵字>
```

**可以搜尋：**
- 用戶姓名
- 用戶 ID
- 組織名稱

### 實際範例：

#### 1️⃣ 搜尋用戶姓名
```
/user 王小明
```
找到名字包含「王小明」的用戶。

#### 2️⃣ 搜尋用戶 ID
```
/user Uea056e0fef6205ffc550644e9dc5adaa
```
查找特定用戶的完整資料。

#### 3️⃣ 搜尋組織
```
/user 台北市
```
找到所有「台北市」相關組織的用戶。

#### 4️⃣ 使用簡短指令
```
/u 王小明
```
`/u` 是 `/user` 的簡寫，功能完全相同。

### 📊 搜尋結果說明

#### 單一用戶結果：
會顯示完整的用戶資料，包括：
- **姓名**：用戶的 LINE 顯示名稱
- **用戶ID**：完整的 LINE 用戶 ID
- **加入時間**：用戶首次使用機器人的時間
- **訊息數量**：總共發送的訊息數
- **平均信心度**：AI 回應的平均信心程度
  - 🟢 高信心度 (≥0.8)
  - 🟡 中等信心度 (0.6-0.8)
  - 🔴 低信心度 (<0.6)
- **組織資訊**：包含組織名稱、服務縣市、聯絡資訊等

#### 多個用戶結果：
會顯示用戶列表，每個用戶顯示：
- 編號和姓名
- 用戶 ID 後 10 碼
- 組織名稱

---

## 低信心度問題查詢

### 📊 查看低信心度問題：`/lowconf`

**用法：**
```
/lowconf [數量] [天數]
```

**功能說明：**
查看 AI 信心度低於閾值（目前設定為 0.83）的問題，幫助您識別需要人工介入的困難問題。

### 實際範例：

#### 1️⃣ 查看預設範圍的低信心度問題
```
/lowconf
```
顯示過去 7 天內的 10 筆低信心度問題。

#### 2️⃣ 指定顯示數量
```
/lowconf 20
```
顯示過去 7 天內的 20 筆低信心度問題。

#### 3️⃣ 指定時間範圍
```
/lowconf 15 14
```
顯示過去 14 天內的 15 筆低信心度問題。

#### 4️⃣ 使用簡短指令
```
/low 10 3
```
`/low` 是 `/lowconf` 的簡寫，顯示過去 3 天內的 10 筆問題。

### 📈 結果說明

#### 報告格式：
```
📊 低信心度問題報告

**篩選條件：**
• 信心度 < 0.83
• 時間範圍：過去 7 天
• 顯示數量：5 筆

1. 🔴 王小明 (0.45)
   ⏰ 07-30 14:23
   ❓ 請問我們的服務費用是如何計算的？有沒有優惠方案...
   🤖 關於費用計算，我需要更多資訊才能準確回答...

2. 🟡 李大華 (0.67)
   ⏰ 07-29 09:15
   ❓ 我想了解申請流程的具體步驟
   🤖 申請流程包括以下步驟...
```

#### 信心度指標：
- 🔴 極低信心度 (<0.6) - 需要優先處理
- 🟡 低信心度 (0.6-0.83) - 建議人工檢查

#### 顯示內容：
- **用戶資訊**：姓名和信心度分數
- **時間戳記**：問題提出時間
- **用戶問題**：原始問題內容（截斷至 100 字元）
- **AI 回應**：AI 的回答內容（截斷至 80 字元）

### 💡 使用建議

#### 1. 定期監控
建議每天檢查低信心度問題：
```
/lowconf 20 1
```

#### 2. 週報分析
週末時查看整週的問題趨勢：
```
/lowconf 50 7
```

#### 3. 問題分類
根據信心度分數優先處理：
- 🔴 <0.6：立即處理
- 🟡 0.6-0.83：排程處理

#### 4. 別名使用
記住這些簡寫可以提高效率：
- `/low` = `/lowconf`
- `/lc` = `/lowconf`
- `/低信心` = `/lowconf`

---

## AI問題分析

### 🤖 智能分析失敗問題：`/analyze`

**用法：**
```
/analyze [天數] [最大問題數]
```

**功能說明：**
使用AI分析低信心度問題，提取最重要的問題範例和主題分類。簡潔輸出：
- 三個主要問題類型關鍵字
- 五個最重要的問題範例
- 保持簡潔清晰的格式

### 實際範例：

#### 1️⃣ 預設範圍分析
```
/analyze
```
分析過去 7 天內最多 50 個失敗問題。

#### 2️⃣ 指定時間範圍
```
/analyze 14
```
分析過去 14 天內的失敗問題。

#### 3️⃣ 指定問題數量
```
/analyze 7 30
```
分析過去 7 天內最多 30 個問題。

#### 4️⃣ 使用簡短指令
```
/分析 10 100
```
`/分析` 是中文別名，分析過去 10 天內最多 100 個問題。

### 📊 分析報告格式

#### 報告結構：
```
🤖 AI問題分析報告

**分析範圍：**
• 時間範圍：過去 7 天
• 分析問題數：25 筆
• 信心度閾值：< 0.83

**AI分析結果：**

**主要問題類型：** 費用計算、申請流程、服務範圍

**最重要問題範例：**
1. 服務費用如何計算？有哪些收費項目？
2. 申請流程需要哪些文件？審核要多久？
3. 你們的服務範圍包括哪些地區？
4. 服務品質如何保證？有什麼保障措施？
5. 有沒有優惠方案或折扣可以選擇？
```

### 🧠 AI分析特色

#### 智能功能：
- **頻率分析**：識別最常被問到的問題
- **主題分類**：自動將問題按主題分組
- **價值評估**：判斷哪些問題最值得優先解決
- **改進建議**：提供具體的AI訓練和知識庫改進方案

#### 分析維度：
- **出現頻率**：相同或相似問題的重複次數
- **信心度分布**：問題難度和AI不確定性
- **問題複雜度**：需要多少背景知識才能回答
- **用戶影響**：對用戶體驗的影響程度

### 💡 使用建議

#### 1. 定期分析
建議每週進行一次深度分析：
```
/analyze 7 50
```

#### 2. 月度回顧
月底時查看整月趨勢：
```
/analyze 30 100
```

#### 3. 緊急分析
發現問題激增時快速分析：
```
/analyze 1 20
```

#### 4. 別名使用
記住這些簡寫：
- `/analysis` = `/analyze`
- `/分析` = `/analyze`
- `/問題分析` = `/analyze`

### ⚡ 分析流程

1. **數據收集**：從資料庫提取低信心度問題
2. **頻率統計**：計算相同問題的出現次數
3. **AI處理**：使用OpenAI進行深度分析
4. **結果整理**：格式化分析報告
5. **建議生成**：提供具體改進方案

### 🎯 實際應用

#### 問題發現：
- 識別知識盲點
- 發現用戶需求趨勢
- 找出訓練不足的領域

#### 改進方向：
- 更新AI訓練資料
- 補充知識庫內容
- 調整回答策略

#### 品質提升：
- 減少低信心度回答
- 提高用戶滿意度
- 優化服務流程

---

## 幫助指令

### 📖 查看所有指令：`/help`

**用法：**
```
/help
```
顯示所有可用的管理員指令。

### 📖 查看特定指令說明：`/help <指令名稱>`

**用法：**
```
/help user
```
顯示 `user` 指令的詳細說明。

### 其他幫助指令別名：
- `/h` - `/help` 的簡寫
- `/？` - 中文問號也可以
- `/幫助` - 中文指令

---

## 常見問題

### ❓ 找不到用戶怎麼辦？

**可能原因：**
1. 用戶名稱拼寫錯誤
2. 用戶還沒有使用過機器人
3. 搜尋關鍵字太具體

**建議解決方法：**
- 嘗試使用部分關鍵字（例如：只搜「王」而不是「王小明」）
- 使用組織名稱搜尋
- 檢查拼寫是否正確

### ❓ 指令打錯了怎麼辦？

系統會自動提供建議：
```
❌ 找不到指令 'usr'

💡 您是否要找：/user、/u
```

### ❓ 為什麼一般用戶看不到我的指令？

這是安全設計！只有設定的管理員可以使用指令。對一般用戶來說：
- 您的指令看起來像普通訊息
- 會由 AI 正常回應
- 不會暴露管理功能

### ❓ 如何複製用戶 ID？

在用戶詳細資料中，用戶 ID 會顯示為：
```
**用戶ID：** `Uea056e0fef6205ffc550644e9dc5adaa`
```
長按用戶 ID 部分即可複製。

---

## 💡 使用小技巧

### 1. 快速搜尋
使用簡短的關鍵字可以找到更多結果：
- ✅ `/user 台北` - 找到所有台北相關的用戶
- ❌ `/user 台北市中正區某某基金會` - 可能找不到結果

### 2. 使用簡寫
記住這些簡寫可以提高效率：
- `/u` = `/user`
- `/h` = `/help`

### 3. 善用組織搜尋
如果忘記用戶姓名，可以用組織名稱搜尋：
```
/user 社會福利
```

### 4. 確認信心度
關注用戶的平均信心度，可以了解 AI 回應品質：
- 🔴 低信心度用戶可能需要更多關注
- 🟢 高信心度表示互動良好

---

## 🆘 需要幫助？

如果遇到問題或需要新功能：
1. 先嘗試 `/help` 查看所有可用指令
2. 檢查指令格式是否正確
3. 聯絡技術支援團隊

---

**記住：管理員指令讓您更有效率地管理 LINE Bot，善用這些工具可以大大提升工作效率！** 🚀